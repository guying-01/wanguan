<common-header>
  万贯五金机电
</common-header>
<scroll-top></scroll-top>
<ion-view>
  <ion-content on-scroll="goodsListScroll();" on-swipe-left="onSwipeLeft();" on-swipe-right="onSwipeRight();">
    <div class="bar bar-header item-input-inset">
      <label class="item-input-wrapper">
        <i class="icon ion-ios-search placeholder-icon"></i>
        <input type="search" placeholder="商品查询" ng-model="search.keywords">
      </label>
      <button class="button button-assertive" ng-click="openModal()">查询</button>
    </div>
    <div class="row row-no-padding" style="min-height: 100%">
      <div class="productList col col-33"  style="border-right: 1px solid #ddd;min-height: 100%;box-shadow: inset -10px 0px 40px #ccccce">
        <ul>
          <li ng-repeat="product in productList" ng-click="getData({{product.categoryId}},$index)" class="padding" ng-class="{'active':i==$index}">
            {{product.categoryName}}
          </li>
        </ul>
      </div>
      <ion-list class=" col col-66">
        <div ng-repeat="x in goodsList">
          <ion-item style="border-left: 0" class="item item-avatar">
            <img src={{x.url||"img/default.jpg"}} alt="">
            <p>{{x.name}}</p>
            <p>期初数：{{x.iniqty}}</p>
            <p>当前库存：{{x.totalqty}}</p>
            <p style="color:#ef473a">单价：{{x.salePrice}}元/{{x.unitName}}</p>
          </ion-item>

          <ion-item class="item-divider" style="border-left: none">
            <button class="button button-assertive button-small" ng-click="addToCart($index)">加入购物车</button>
          </ion-item>
        </div>
      </ion-list>
    </div>

  </ion-content>
</ion-view>
<script id="searchGoodsList.html" type="text/ng-template">
  <ion-modal-view>
    <ion-header-bar class="bar-assertive" align-title="center">
      <h1 class="title">商品搜索</h1>
      <button class="button button-icon" ng-click="closeModal()">
        <i class="icon ion-android-close"></i>
      </button>
    </ion-header-bar>
    <ion-content>
      <ion-list>
        <div ng-repeat="x in searchList track by $index">
          <ion-item  style="border-left: 0" class="item item-avatar">
            <img src={{x.url||"img/default.jpg"}} alt="">
            <p>{{x.name}}</p>
            <p>期初数：{{x.iniqty==''? 0 : x.iniqty}}</p>
            <p>当前库存：{{x.totalqty}}</p>
            <p style="color:#ef473a">单价：{{x.salePrice}}元/{{x.unitName}}</p>
          </ion-item>

          <ion-item class="item-divider" style="border-left: none">
            <button class="button button-assertive button-small" ng-click="addToCart1($index)">加入购物车</button>
          </ion-item>
        </div>
      </ion-list>
    </ion-content>
  </ion-modal-view>
</script>
